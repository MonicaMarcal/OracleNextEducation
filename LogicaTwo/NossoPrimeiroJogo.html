<!--
  Desenhe circulo

<canvas width="600" height="400"></canvas>

<script>
    var tela = document.querySelector('canvas');
    var pincel = tela.getContext('2d');

    pincel.fillStyle = 'lightgray';
    pincel.fillRect(0, 0, 600, 400);

    var raio = 10;

    function desenhaCirculo(x, y, raio, cor) {
        pincel.fillStyle = cor;
        pincel.beginPath();
        pincel.arc(x, y, raio, 0, 2 * Math.PI);
        pincel.fill();

   }
    function limpaTela() {
    pincel.clearRect(0, 0, 600, 400);
    }

    function desenhaAlvo(x, y) {
    desenhaCirculo(x, y, raio+20, 'red');
    desenhaCirculo(x, y, raio+10, 'white');
    desenhaCirculo(x, y, raio, 'red');
    }

    function sorteiaPosicao(maximo) {
        return Math.floor(Math.random() * maximo);
    }

    function atualizaTela() {
    limpaTela();
    var xAleatorio = sorteiaPosicao(600);
    var yAleatorio = sorteiaPosicao(400);
    desenhaAlvo(xAleatorio, yAleatorio);
    }
    setInterval(atualizaTela, 1000);

</script>
-->
<!--
  Temos nosso alvo pulando entre pontos aleatórios na página e,
  ao clicarmos sobre ele, surge uma alerta com a mensagem "Acertou!".
  Se clicarmos em qualquer outro ponto, nada acontece.


<canvas width="600" height="400"></canvas>

<script>

  var tela = document.querySelector('canvas');
  var pincel = tela.getContext('2d');

  pincel.fillStyle = 'lightgray';
  pincel.fillRect(0, 0, 600, 400);

  var raio = 10;
  var xAleatorio;
  var yAleatorio;

  function desenhaCirculo(x, y, raio, cor) {
      pincel.fillStyle = cor;
      pincel.beginPath();
      pincel.arc(x, y, raio, 0, 2 * Math.PI);
      pincel.fill();
  }

  function limpaTela() {
      pincel.clearRect(0, 0, 600, 400);

  }

  function desenhaAlvo(x,y) {
      desenhaCirculo(x, y, raio+20, 'red');
      desenhaCirculo(x, y, raio+10, 'white');
      desenhaCirculo(x, y, raio, 'red');
  }

  function sorteiaPosicao(maximo) {
      return Math.floor(Math.random() * maximo);
  }

function atualizaTela() {
  limpaTela();
  xAleatorio = sorteiaPosicao(600);
  yAleatorio = sorteiaPosicao(400);
  desenhaAlvo(xAleatorio, yAleatorio);
}

setInterval(atualizaTela, 1000);

function dispara(evento) {

  var x = evento.pageX - tela.offsetLeft;
  var y = evento.pageY - tela.offsetTop;

  if((x > xAleatorio - raio)
  && (x < xAleatorio + raio)
  && (y > yAleatorio - raio)
  && (y < yAleatorio + raio)) {

      alert('Acertou!');
  }
}

tela.onclick = dispara;

</script>
-->

<!--
  O desafio desse exercício é trocar a cor utilizada para desenhar
  o círculo de acordo com o quadrado da cor que clicarmos.
  Se clicarmos no verde, usaremos a cor verde quando formos desenhar
  e por aí vai. 
  
  Outro ponto é que não podemos desenhar em cima da nossa paleta,
  ou melhor, não podemos desenhar na linha inteira na qual faz parte.

  Para solucionar esse problema, você precisará identificar qual
  quadrado foi clicado, implementando uma lógica de colisão parecida
  com a que usamos para definir se acertamos um alvo ou não.
  Veja que como estamos trabalhando com um quadrado, 
  não usamos um raio na lógica de colisão, usamos o tamanho do quadrado.
-->
<meta charset="UTF-8">

<canvas width="600" height="400"></canvas>

<script>

    function desenhaQuadrado(x, y, tamanho, cor) {

        pincel.fillStyle = cor;
        pincel.fillRect(x, y, tamanho, tamanho)
        pincel.fill();
    }

    function desenhaCirculo(x, y, raio, cor) {

        pincel.fillStyle = cor; // o padrão é blue
        pincel.beginPath();
        pincel.arc(x, y, raio, 0, 2 * 3.14);
        pincel.fill();

    }

    function desenhaPaletaDeCores() {

        desenhaQuadrado(xVermelho, yQuadrados, tamanhoQuadrados, 'red');
        desenhaQuadrado(xVerde, yQuadrados, tamanhoQuadrados, 'green');
        desenhaQuadrado(xAzul, yQuadrados, tamanhoQuadrados, 'blue');

    }

    function lidaComMovimentoDoMouse(evento) {

        var x = evento.pageX - tela.offsetLeft;
        var y = evento.pageY - tela.offsetTop;

        // usando a nova função 
        if(desenha && podeDesenharNaArea(x,y)) {

            desenhaCirculo(x, y, 5, corAtual);
        }
    }

    function habilitaDesenhar() {

        desenha = true;
    }

    function desabilitaDesenhar() {

        desenha = false;
    }

    function podeDesenharNaArea(x, y) {

         if(x >= 0 && x < 3*tamanhoQuadrados && y >= 0 && y < tamanhoQuadrados) {
            return false;
        } else {
            return true;
        }
    }

function selecionaCor(evento) {

        var x = evento.pageX - tela.offsetLeft;
        var y = evento.pageY - tela.offsetTop;

        // cada condição muda a variável `corAtual`

        // começamos pela condição do y que é igual em todos os casos
        if (y > yQuadrados && y < yQuadrados + tamanhoQuadrados) {

            if (x > xVermelho && x < xVermelho + tamanhoQuadrados) {

                corAtual = 'red';

            } else if (x > xVerde && x < xVerde + tamanhoQuadrados) {

                corAtual = 'green';

            } else if (x > xAzul && x < xAzul + tamanhoQuadrados) {

                corAtual = 'blue';
            }
        }
    }

    var tela = document.querySelector('canvas');
    var pincel = tela.getContext('2d');
    pincel.fillStyle = 'lightgray';
    pincel.fillRect(0, 0, 600, 400);

    var desenha = false;
    var corAtual = 'blue';
    var xVermelho = 0;
    var xVerde  = 50;
    var xAzul = 100;
    var yQuadrados = 0;
    var tamanhoQuadrados = 50;

    desenhaPaletaDeCores();

    tela.onmousemove = lidaComMovimentoDoMouse;

    tela.onmousedown = habilitaDesenhar;

    tela.onmouseup = desabilitaDesenhar;

    tela.onclick = selecionaCor;

</script>